<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get started • shinybrms</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Get started">
<meta property="og:description" content="shinybrms">
<meta property="og:image" content="/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">shinybrms</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/shinybrms.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/fweber144/shinybrms/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="shinybrms_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Get started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/fweber144/shinybrms/blob/master/vignettes/shinybrms.Rmd"><code>vignettes/shinybrms.Rmd</code></a></small>
      <div class="hidden name"><code>shinybrms.Rmd</code></div>

    </div>

    
    
<p>The following screenshots show how to fit an example model in the <strong>shinybrms</strong> app. For instructions on how to launch the <strong>shinybrms</strong> app, see the <a href="../index.html">starting page</a>.</p>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h2>
<p><br>
Usually, you will want to upload a custom dataset, but for the purpose of demonstration, we will choose the example dataset <code><a href="https://rdrr.io/pkg/MASS/man/bacteria.html">MASS::bacteria</a></code> here:</p>
<p><br></p>
<p><a href="screenshots/bacteria_1.png"><img src="screenshots/bacteria_1.png"></a> <em>Fig. 1: Page “Data” (top).</em></p>
<p><br>
Further down the “Data” page, we may choose e.g. to show all rows of the dataset:</p>
<p><br></p>
<p><a href="screenshots/bacteria_2.png"><img src="screenshots/bacteria_2.png"></a> <em>Fig. 2: Page “Data” (further down).</em></p>
</div>
<div id="likelihood" class="section level2">
<h2 class="hasAnchor">
<a href="#likelihood" class="anchor"></a>Likelihood</h2>
<div id="outcome" class="section level3">
<h3 class="hasAnchor">
<a href="#outcome" class="anchor"></a>Outcome</h3>
<p><br>
On page “Likelihood”, the first tab is “Outcome”. Here, we define the variable <code>y</code> (from our dataset <code><a href="https://rdrr.io/pkg/MASS/man/bacteria.html">MASS::bacteria</a></code>) to be the outcome and since this is a binary outcome, we choose the distributional family “Bernoulli with logit link”:</p>
<p><br></p>
<p><a href="screenshots/bacteria_3.png"><img src="screenshots/bacteria_3.png"></a> <em>Fig. 3: Page “Likelihood”, tab “Outcome”.</em></p>
</div>
<div id="predictors" class="section level3">
<h3 class="hasAnchor">
<a href="#predictors" class="anchor"></a>Predictors</h3>
<p><br>
After selecting the tab “Predictors”, we define the variables <code>week</code> and <code>trt</code> to have nonvarying main effects and variable <code>ID</code> to have varying intercepts:</p>
<p><br></p>
<p><a href="screenshots/bacteria_4.png"><img src="screenshots/bacteria_4.png"></a> <em>Fig. 4: Page “Likelihood”, tab “Predictors” (top).</em></p>
<p><br>
After scrolling down, we set up a (nonvarying) interaction term for <code>week</code> and <code>trt</code>:</p>
<p><br></p>
<p><a href="screenshots/bacteria_5.png"><img src="screenshots/bacteria_5.png"></a> <em>Fig. 5: Page “Likelihood”, tab “Predictors” (bottom; setting up the interaction effect).</em></p>
<p><br>
After clicking on “Add interaction term”, we get:</p>
<p><br></p>
<p><a href="screenshots/bacteria_6.png"><img src="screenshots/bacteria_6.png"></a> <em>Fig. 6: Page “Likelihood”, tab “Predictors” (bottom; after adding the interaction effect).</em></p>
</div>
</div>
<div id="prior" class="section level2">
<h2 class="hasAnchor">
<a href="#prior" class="anchor"></a>Prior</h2>
<div id="default-priors" class="section level3">
<h3 class="hasAnchor">
<a href="#default-priors" class="anchor"></a>Default priors</h3>
<p><br>
At the top of page “Prior”, we get a table with the default priors for the model we have specified so far:</p>
<p><br></p>
<p><a href="screenshots/bacteria_7.png"><img src="screenshots/bacteria_7.png"></a> <em>Fig. 7: Page “Prior” (top).</em></p>
<p><br>
At the bottom of page “Prior”, we can specify custom priors. Here, we will use a Student-<span class="math inline">\(t\)</span> prior distribution with 3 degrees of freedom, a location parameter of 0, and a scale parameter of 10 for all regression coefficients (parameter class <code>b</code>):</p>
<p><br></p>
<p><a href="screenshots/bacteria_8.png"><img src="screenshots/bacteria_8.png"></a> <em>Fig. 8: Page “Prior” (bottom; setting up a custom prior).</em></p>
<p><br>
After clicking on “Add prior”, we see that our Student-<span class="math inline">\(t\)</span> prior was added to the preview table on the right:</p>
<p><br></p>
<p><a href="screenshots/bacteria_9.png"><img src="screenshots/bacteria_9.png"></a> <em>Fig. 9: Page “Prior” (bottom; after adding a custom prior).</em></p>
</div>
</div>
<div id="posterior" class="section level2">
<h2 class="hasAnchor">
<a href="#posterior" class="anchor"></a>Posterior</h2>
<div id="preparing-the-stan-run" class="section level3">
<h3 class="hasAnchor">
<a href="#preparing-the-stan-run" class="anchor"></a>Preparing the Stan run</h3>
<p><br>
At the top of page “Posterior”, we could get a preview of the Stan code and the Stan data (and download them):</p>
<p><br></p>
<p><a href="screenshots/bacteria_10.png"><img src="screenshots/bacteria_10.png"></a> <em>Fig. 10: Page “Posterior” (top).</em></p>
<p><br>
Here, we will scroll down to focus on the panel “Advanced options”:</p>
<p><br></p>
<p><a href="screenshots/bacteria_11.png"><img src="screenshots/bacteria_11.png"></a> <em>Fig. 11: Page “Posterior” (middle).</em></p>
<p><br>
There, we may set a seed for reproducibility:</p>
<p><br></p>
<p><a href="screenshots/bacteria_12.png"><img src="screenshots/bacteria_12.png"></a> <em>Fig. 12: Page “Posterior”, panel “Advanced options”.</em></p>
</div>
<div id="running-stan" class="section level3">
<h3 class="hasAnchor">
<a href="#running-stan" class="anchor"></a>Running Stan</h3>
<p><br>
Now, we head over to the fundamental part of our analysis, the inference of the posterior distribution of all parameters. Since we have everything prepared now, this is accomplished quite easily: Right below the panel “Advanced options”, we find the panel “Run Stan”, where we simply click the button for running Stan:</p>
<p><br></p>
<p><a href="screenshots/bacteria_13.png"><img src="screenshots/bacteria_13.png"></a> <em>Fig. 13: Page “Posterior”, panel “Run Stan”.</em></p>
<p><br>
Now, Stan starts compiling the C++ code for our model and after having finished the compilation, Stan automatically starts sampling. As we have not changed the default for the advanced option “Open progress”, a file will automatically open up (in a new browser tab) and show the sampling progress (after compilation has finished):</p>
<p><br></p>
<p><a href="screenshots/bacteria_14.png"><img src="screenshots/bacteria_14.png"></a> <em>Fig. 14: Sampling progress (top).</em></p>
<p><br>
Depending on your model and data, the sampling might take a while. For the example here, the sampling is quite fast. Note that the progress file needs to be refreshed manually (by refreshing the corresponding browser tab). When Stan has finished sampling, the bottom of the progress file looks like this:</p>
<p><br></p>
<p><a href="screenshots/bacteria_15.png"><img src="screenshots/bacteria_15.png"></a> <em>Fig. 15: Sampling progress (bottom; after end of sampling).</em></p>
</div>
<div id="inspecting-the-output" class="section level3">
<h3 class="hasAnchor">
<a href="#inspecting-the-output" class="anchor"></a>Inspecting the output</h3>
<p><br>
We can now switch back to the browser tab where <strong>shinybrms</strong> is running and inspect the final panel “Output” on page “Posterior”. At the top of this “Output” panel, we can check some diagnostics specific to Hamiltonian Monte Carlo (HMC): the number of iterations ending with a divergence, the number of iterations hitting the maximum tree depth, and the Bayesian fraction of missing information for the energy transitions (E-BFMI). Here, these HMC-specific diagnostics are all OK:</p>
<p><br></p>
<p><a href="screenshots/bacteria_16.png"><img src="screenshots/bacteria_16.png"></a> <em>Fig. 16: Page “Posterior”, panel “Output” (top).</em></p>
<p><br>
Underneath the HMC diagnostics, we get a short summary of our posterior inference including some more general Markov chain Monte Carlo (MCMC) diagnostics (<code>Rhat</code>, <code>Bulk_ESS</code>, <code>Tail_ESS</code>). Here, these MCMC diagnostics are all OK (see <a href="https://arxiv.org/abs/1903.08008">here</a> why):</p>
<p><br></p>
<p><a href="screenshots/bacteria_17.png"><img src="screenshots/bacteria_17.png"></a> <em>Fig. 17: Page “Posterior”, panel “Output” (middle).</em></p>
<p><br>
For those who would now want to start interpreting the posterior results given under “Summary” (e.g. the posterior median and the posterior 2.5% and 97.5% quantiles), it should be noted that the output shown under “Summary” is only intended for a quick inspection. A much more comprehensive analysis of the output is possible using the Shiny app from <a href="https://CRAN.R-project.org/package=shinystan"><strong>shinystan</strong></a> which also offers posterior predictive checks as well as more details concerning the HMC-specific and the more general MCMC diagnostics. Here, we launch the <strong>shinystan</strong> app by clicking the corresponding button at the bottom of the page (after having entered a seed for reproducibility of the posterior predictive checks):</p>
<p><br></p>
<p><a href="screenshots/bacteria_18.png"><img src="screenshots/bacteria_18.png"></a> <em>Fig. 18: Page “Posterior”, panel “Output” (bottom).</em></p>
<p><br>
At this point, the <strong>shinybrms</strong> workflow ends and passes over to the <strong>shinystan</strong> workflow. Note that within the <strong>shinybrms</strong> app, you can also download different output objects (see Fig. 18) to analyze them outside of <strong>shinybrms</strong>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Frank Weber.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
